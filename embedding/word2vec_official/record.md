编译op过程20180127
原始:
TF_CFLAGS=( $(python -c 'import tensorflow as tf; print(" ".join(tf.sysconfig.get_compile_flags()))') )
TF_LFLAGS=( $(python -c 'import tensorflow as tf; print(" ".join(tf.sysconfig.get_link_flags()))') )
g++ -std=c++11 -shared word2vec_ops.cc word2vec_kernels.cc -o word2vec_ops.so -fPIC ${TF_CFLAGS[@]} ${TF_LFLAGS[@]} -O2 -D_GLIBCXX_USE_CXX11_ABI=0


当前目录:
/home/hkx/work/hkx_tf_practice/embedding/word2vec_official

编译so命令:
g++ -std=c++11 -shared word2vec_ops.cc word2vec_kernels.cc -o word2vec_ops.so -fPIC \
         -I/home/hkx/anaconda2/lib/python2.7/site-packages/tensorflow/include/ \
         -I/home/hkx/anaconda2/lib/python2.7/site-packages/tensorflow/include/external/nsync/public/ \
         -I/home/hkx/TensorFlow/tensorflow/  -O2 -D_GLIBCXX_USE_CXX11_ABI=0

         经过实践测试,发现各个库的顺序也会影响编译过程,若顺序不对,会导致编译时出现变量未声明的情况

         比如DT_UINT64定义在/home/hkx/anaconda2/lib/python2.7/site-packages/tensorflow/include/tensorflow/core/framework/types.pb.h (// Generated by the protocol buffer compiler.  DO NOT EDIT!, source: tensorflow/core/framework/types.proto  )中
         若未将 -I/home/hkx/anaconda2/lib/python2.7/site-packages/tensorflow/include/ 放在 -I/home/hkx/TensorFlow/tensorflow/前面
         会导致编译 /home/hkx/TensorFlow/tensorflow/tensorflow/core/framework/types.h文件时,出现未声明错误:
         /home/hkx/TensorFlow/tensorflow/tensorflow/core/framework/types.h:199:29: error: ‘DT_UINT64’ was not declared in this scope
          MATCH_TYPE_AND_ENUM(uint64, DT_UINT64);

          调整编译顺序后,编译通过.
